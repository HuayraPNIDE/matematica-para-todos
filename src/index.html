<!doctype html>
<html>
    <head>
        <title>Matematica para todos - MXT</title>
        <link href="css/bootstrap.min.css" media='screen' rel="stylesheet" />
        <link href="css/style.css" media='screen' rel="stylesheet" />
        <script src="./js/socket.io/socket.io-1.2.0.js"></script>
        <script src="js/jquery-1.11.3.min.js"></script>
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <script src="js/main.js"></script>

    </head>
    <body>
        <main id="container">
            <h1 id="titulo">La Guerra de los Lados</h1>
            <section id="msg" class="alert alert-danger alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>ERROR!</strong> MSG Error.
            </section>
            <section id="avatar">
                <div class="row">
                    <div class="col-xs-6 col-sm-4"></div>
                    <div class="col-xs-6 col-sm-4 centro">
                        <div class="thumbnail">
                            <img src="res/gui/avatar-neutro.png" alt="Usuario" />
                            <div class="caption">
                                <div class="form-group">
                                    <input name="nombre" id="nombre" type="text" class="form-control" placeholder="Ingrese un nombre de usuario.">
                                </div>
                                <p><a href="#" id="set_usuario" class="btn btn-primary" role="button">Entrar</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-4"></div>
                </div>
            </section>

            <section id="mazos">
                <div id="mazo1"><div id="cont_jugador1">0</div><img src="res/imgs/lomo.png" /></div>
                <div id="cont_guerra"></div>
                <div id="mazo2"><div id="cont_jugador2">0</div><img src="res/imgs/lomo.png" /></div>
            </section>

            <p id="nombres"></p>

            <div id="opciones">
                <input name="opcion" type="radio" value="0" id="opcion_jugador1">Jugador 1<br>
                <input name="opcion" type="radio" value="1" id="opcion_jugador2">Jugador 2<br>
                <input name="opcion" type="radio" value="empate">EMPATE<br>
                <input type="button" value="Responder" id="btn_mano">
            </div>

            <section id="cartas">
                <div id="carta_jugador1"><img alt="Jugador 1" /></div>
                <div id="carta_empate"><img src="" alt="Empate" /></div>
                <div id="carta_jugador2"><img src="" alt="Jugador 2" /></div>
            </section>

            <section id="amigos">
                <p><a href="#" id="actualizar_amigos" class="btn btn-primary" role="button">Actualizar</a></p>
                <div id="lista_amigos"></div>
            </section>
        </main>
    <script>
        $(document).ready(function() {
            console.log("Inicio");
            var amigos = new Amigos();
            $("#set_usuario").on("click", function(event) {
                event.stopPropagation();
                nombre = $("#nombre").val();
                if(!nombre) {
                    $("#msg").show();
                    return;
                }
                new Servidor(nombre);
                // Espera un segundo para ejecutar la conexi√≥n desde el cliente //
                setTimeout(function(){
                    cliente = new Cliente(nombre);
                    cliente.init();
                    amigos.buscar();
//                    amigos.actualizarVista();
                }, 1001);
            });
            
            $("#actualizar_amigos").on("click", function(event) {
                event.stopPropagation();
                amigos.actualizarVista(cliente);
                console.log("Evento actualizar_amigos INDEX.HTML");
            });
        });
    </script>
    </body>
</html>
